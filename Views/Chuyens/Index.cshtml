@model IEnumerable<ThanhBuoi.Models.Chuyen>

@{
    ViewData["Title"] = "Index";
}

<div class="container">
    <h1 class="mt-4">Danh sách Chuyến</h1>
    <div class="row">
        <div class="col-md-6">
            <h2 class="mt-4">Tạo mới</h2>
            <div class="bg-light rounded p-4">
                <form id="createForm" asp-action="Create">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <div class="row mb-3">
                        <div class="col">
                            <label for="XeId" class="form-label">Xe</label>
                            <select class="form-select" name="XeId" required>
                                <option value="">-- Chọn Xe --</option>
                                @foreach (var xe in ViewBag.listXeTrue)
                                {
                                    <option value="@xe.Id">@xe.Ten</option>
                                }
                            </select>
                        </div>
                        <div class="col">
                            <label for="TuyenId" class="form-label">Tuyến</label>
                            <select class="form-select" name="TuyenId" required>
                                <option value="">-- Chọn Tuyến --</option>
                                @foreach (var tuyen in ViewBag.listTuyen)
                                {
                                    <option value="@tuyen.Id">@tuyen.Ten</option>
                                }
                            </select>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="DiemDon" class="form-label">Điểm Đón</label>
                        <input id="DiemDon" name="DiemDon" class="form-control" required type="text" value="Bến Xe Miền Tây" readonly />
                    </div>

                    <div class="mb-3">
                        <label for="ThoiGianDi" class="form-label">Thời Gian Đi</label>
                        <input for="ThoiGianDi" name="ThoiGianDi" class="form-control" type="datetime-local" required />
                    </div>
                    <div class="mb-3">
                        <label for="GiaSukienID" class="form-label">Giá Sự Kiện</label>
                        <select class="form-select" name="ngayle" required>
                            <option value="">-- Chọn Giá Sự Kiện --</option>
                            @foreach (var gia in ViewBag.listGiaTang)
                            {
                                <option value="@gia.Key">@gia.Key - @(gia.Value * 100)%</option>
                            }
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="Gia" class="form-label">Giá</label>
                        <input for="Gia" name="Gia" class="form-control" type="number" required />
                    </div>
                    <div class="mb-3">
                        <input type="submit" value="Create" class="btn btn-primary btn-sm" />
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>



<div class="container mt-4">
    <h2 class="mt-4">Danh sách</h2>
    <div class="bg-light rounded p-4">
        <table class="table table-sm">
            <thead>
                <tr>
                    <th scope="col">Tên</th>
                    <th scope="col">Xe</th>
                    <th scope="col">Điểm Đón</th>
                    <th scope="col">Thời Gian Đi</th>
                    <th scope="col">Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@Html.DisplayFor(modelItem => item.Ten)</td>
                        <td>@Html.DisplayFor(modelItem => item.Xe!.Ten)</td>
                        <td>@Html.DisplayFor(modelItem => item.DiemDon)</td>
                        <td>@Html.DisplayFor(modelItem => item.ThoiGianDi)</td>
                        <td>
                            <div class="btn-group" role="group">
                                <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-primary btn-sm h-auto">Sửa</a>
                                <a asp-action="Details" asp-route-id="@item.Id" class="btn btn-success btn-sm h-auto">Chi tiết</a>
                                <a asp-action="Delete" asp-route-id="@item.Id" class="btn btn-danger btn-sm h-auto">Xóa</a>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<script>
    function scrollToCreateForm() {
        var formSection = document.getElementById("createFormSection");
        formSection.scrollIntoView({ behavior: 'smooth' });
    }
</script>
